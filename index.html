<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>Drupal 8 image cropping</title>
    <meta name="description" content="Presentation about image cropping in Drupal 8.">
    <meta name="author" content="Janez Urevc, Alexander Ross">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">
    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="reveal">
      <div class="slides">

	<section id="front">
	  <!--<img src="img/drupalddmilan.png" style="border: none; max-height: 300px; background: none;" />-->
	  <h2>Image cropping in Drupal 8</h2>
	  <p>
	    <a href="https://www.drupal.org/u/slashrsm">Janez Urevc</a> / <a href="http://twitter.com/slashrsm">@slashrsm</a> / <a href="http://janezurevc.name">http://janezurevc.name</a><br />
	    <a href="https://www.drupal.org/u/bleen">Alexander Ross</a> / <a href="http://twitter.com/bleen18">@bleen18</a> / <a href="http://bleen.net">http://bleen.net</a>
	  </p>
	  <p>
	    <a href="https://slashrsm.github.io/d8-cropping-session/">slashrsm.github.io/d8-cropping-session/</a>
	  </p>
	</section>

	<section>
	  <section id="about-janez">
	    <h2>Janez Urevc (<a href="https://drupal.org/u/slashrsm">@slashrsm</a>)</h2>
	    <ul>
	      <li>senior engineer and team lead at MD Systems</li>
	      <li class="fragment">Active member of Drupal community since 2009</li>
	      <li class="fragment">Lead of the D8 media initiative</li>
	      <li class="fragment">ex Examiner.com</li>
	    </ul>
	  </section>

	  <section>
	    <h2>Biggest company contributor</h2>
	    <img src="img/credits.png" class="stretch" />
	    <p>Source: <a href="https://drupal.org/drupal-services">drupal.org/drupal-services</a></p>
      <p><a href="http://www.md-systems.ch">http://www.md-systems.ch/en</a></p>
	    <aside class="notes">
        <ul>
          <li>top 5 D8 ind. contrib.</li>
          <li>D8 expert</li>
          <li>D8 media expert (NP8)</li>
        </ul>
      </aside>
	  </section>

	  <section>
	    <img src="img/remote.jpg" class="stretch" />
	    <p><a href="https://37signals.com/remote/">Remote: Office not required</a></p>
	  </section>

	  <section>
	    <img src="img/sunset.jpg" class="stretch" />
	  </section>

	  <section>
	    <img src="img/chaung_ta.jpg" class="stretch" />
	  </section>

	  <section>
	    <img src="img/girls.jpg" class="stretch" />
	  </section>

	  <section>
	    <img src="img/madagascar.jpg" class="stretch" />
	  </section>

	  <section>
	    <img src="img/motorbike.jpg" class="stretch" />
    </section>

	  <section>
	    <img src="img/animal_farm.jpg" class="stretch" />
	  </section>

	  <section>
	    <h2>I am always happy to help!</h2>
	  </section>
	</section>

  <section>
    <section id="about-alex">
      <h2>Alexander Ross </h2>
      <h3>Drupal: <a href="https://drupal.org/u/bleen">@bleen</a> | Twitter: <a href="https://twitter.com/bleen18">@bleen18</a></h3>
	    <ul>
	      <li>Director of Software Engineering at NBCUniversal</li>
	      <li class="fragment">Active member of Drupal community since 2006</li>
	      <li class="fragment">One of the organizers of Drupal NYC</li>
	      <li class="fragment">&hellip; always hiring</li>
	    </ul>
      <aside class="notes">
        <ul>
          <li></li>
          <li></li>
        </ul>
      </aside>
    </section>

    <section>
	    <h2>Gratuitous photo of my kid</h2>
	    <img src="img/henry.jpg" class="stretch" />
	  </section>

  </section>

	<section id="contents">
	  <h2>Contents of the session</h2>
	  <ul>
	    <li>What we learned in D7?</li>
	    <li>Crop API</li>
      <li>UI modules in Drupal 8</li>
	    <li>How to get involved</li>
	    <li>Q&amp;A</li>
	  </ul>
      <aside class="notes">
        <ul>
          <li></li>
          <li></li>
        </ul>
      </aside>
	</section>

  <section>
    <section id="d7-cropping-modules">
      <table>
        <caption>Cropping modules</caption>
        <thead>
          <tr>
            <th> Name </th>
            <th> Installs</th>
            <th> Latest release</th>
            <th> D8 </th>
            <th> D7 </th>
            <th> D6 </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="http://drupal.org/project/imagefield_crop" rel="nofollow"> Imagefield Crop</a></td>
            <td>28,664</td>
            <td> 2013-02</td>
            <td> No </td>
            <td> Yes </td>
            <td> Yes </td>
          </tr>
          <tr>
            <td><a href="http://drupal.org/project/manualcrop" rel="nofollow"> Manual crop</a></td>
            <td> 27,682 </td>
            <td> 2015-04 </td>
            <td> No </td>
            <td> Yes </td>
            <td> No </td>
          </tr>
          <tr>
            <td><a href="http://drupal.org/project/imce_crop" rel="nofollow"> IMCE crop</a></td>
            <td> 14,662 </td>
            <td> 2013-12 </td>
            <td> No </td>
            <td> Yes </td>
            <td> Yes </td>
          </tr>
          <tr>
            <td><a href="http://drupal.org/project/smartcrop" rel="nofollow">Smart Crop</a></td>
            <td>  8,156  </td>
            <td>2010-12</td>
            <td> No </td>
            <td> Yes </td>
            <td> Yes </td>
          </tr>
          <tr>
            <td><a href="http://drupal.org/project/imagefield_focus" rel="nofollow">ImageField Focus</a></td>
            <td> 8,103 </td>
            <td> 2011-11 </td>
            <td> No </td>
            <td> Yes </td>
            <td> Yes </td>
          </tr>
          <tr>
            <td><a href="https://drupal.org/project/focal_point" rel="nofollow"> Focal Point</a></td>
            <td> 7,708 </td>
            <td> 2016-02 </td>
            <td> Yes </td>
            <td> Yes </td>
            <td> No </td>
          </tr>
          <tr>
            <td><a href="http://drupal.org/project/imagecrop" rel="nofollow"> Image javascript crop</a></td>
            <td> 6,519</td>
            <td>2011-09</td>
            <td> No </td>
            <td> Yes </td>
            <td> Yes </td>
          </tr>
          <tr>
            <td><a href="http://drupal.org/project/epsacrop" rel="nofollow"> EPSA Crop</a></td>
            <td> 6,301 </td>
            <td> Unmaintained </td>
            <td> No </td>
            <td> Yes </td>
            <td> Yes </td>
          </tr>
          <tr>
            <td><a href="https://drupal.org/project/simplecrop" rel="nofollow">SimpleCrop</a></td>
            <td> 1,702 </td>
            <td> 2015-04 </td>
            <td> No </td>
            <td> Yes </td>
            <td> No </td>
          </tr>
          <tr>
            <td><a href="http://drupal.org/project/media_crop" rel="nofollow"> Media Crop</a></td>
            <td> 920 </td>
            <td> 2012-03</td>
            <td> No </td>
            <td> Yes </td>
            <td> No </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="6">Source: https://www.drupal.org/node/1179172</td>
          </tr>
        </tfoot>
      </table>
    </section>
	  <section id="d7-learned">
      <h2>What we learned</h2>
      <ul>
	      <li class="fragment">A lot of modules with very different approaches to image cropping</li>
	      <li class="fragment">&hellip; but they all share a nearly identical strategy for storing the crop data</li>
	      <li class="fragment">&hellip; hard to switch between modules (custom migration needed)</li>
	      <li class="fragment">&hellip; waste of resources</li>
	    </ul>
      <aside class="notes">
        <ul>
          <li></li>
          <li></li>
        </ul>
      </aside>
	  </section>
	</section>

  <section>
	  <section id="fix-d8">
      <h2>Let's fix the situation for Drupal 8!</h2>
      <aside class="notes">
        <ul>
          <li>general paradigm in D8 media</li>
          <li>reusable components</li>
          <li>standard tools</li>
        </ul>
      </aside>
	  </section>

	  <section id="crop-api">
      <h2>Crop API is born...</h2>
      <ul>
	      <li class="fragment">Attempt to standardize cropping storage and image effects</li>
	      <li class="fragment">&hellip; uses Entity system - Crop is an entity</li>
	      <li class="fragment">&hellip; standard (swappable) storage</li>
	      <li class="fragment">&hellip; easy to work with</li>
	      <li class="fragment">&hellip; automated tests</li>
	      <li class="fragment">&hellip; basic image effects provided</li>
	      <li class="fragment">&hellip; bundlable</li>
	      <li class="fragment">&hellip; fieldable</li>
        <li class="fragment">&hellip; <a href="https://drupal.org/project/crop">drupal.org/project/crop</a></li>
	    </ul>
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

	  <section id="crop-api-storage">
      <img src="img/crop-area.jpg" class="stretch" />
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

	  <section id="crop-api-code-1">
      <h2>Create a Crop entity...</h2>
      <pre><code class="php">
$crop = \Drupal\crop\Entity\Crop::create([
      'type' => 'dummy_crop_type',
      'entity_id' => $file->id(),
      'entity_type' => $file->getEntityTypeId(),
      'x' => '100',
      'y' => '150',
      'width' => '200',
      'height' => '250',
]);
$crop->save();
      </code></pre>
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

	  <section id="crop-api-code-2">
      <h2>Find and use a Crop entity...</h2>
      <pre><code class="php">
$crop = \Drupal\crop\Entity\Crop::findCrop($uri, $crop_type);
$size = $crop->getSize();
$position = $crop->getPosition();

// Anchor (top-left corner) is calculated on the fly.
$anchor = $crop->getAnchor();
      </code></pre>
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

    <section id="crop-api-other-features">
      <h2>Other features...</h2>
      <ul>
	      <li class="fragment">aspect ratio definition</li>
	      <li class="fragment">soft size limit</li>
	      <li class="fragment">hard size limit</li>
	    </ul>
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

    <section id="crop-api-effect">
      <h2>Basic image effect</h2>
      <ul>
	      <li class="fragment">finds crop and applies it</li>
	      <li class="fragment">can be chanied with other effects (scale &amp; crop, scale, ...)</li>
	      <li class="fragment">can be overriden to achieve custom behaviour</li>
	      <li class="fragment">&hellip; or you can implement your own from scratch</li>
	    </ul>
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

    <section id="crop-api-effect-2">
      <img src="img/crop_effect.png" class="stretch" />
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

    <section id="crop-api-style">
      <img src="img/crop_style.png" class="stretch" />
      <aside class="notes">
        <ul>
          <li></li>
        </ul>
      </aside>
	  </section>

	</section>

  <section>
	  <section id="crop-ui-focal-point">
      <h2>Focal point</h2>
      <img src="img/focal_point_preview.png" class="stretch" />
      <p>Allows editors to specify the most important part of an image before cropping occurs</p>
      <p class="fragment">[Demo]</p>
	  </section>

	  <section id="crop-ui-advanced-crop">
      Advanced crop
	  </section>

	  <section id="crop-ui-imgae-widget-crop-1">
      <h2>Image widget crop</h2>
      <img src="img/image_widget_crop.png" class="stretch" />
	  </section>

	  <section id="crop-ui-imgae-widget-crop-2">
      <h2>Image widget crop</h2>
      <ul>
	      <li class="fragment">created by <a href="https://drupal.org/u/woprrr">Alexandre Mallet - @woprrr</a></li>
	      <li class="fragment">Drupal 8 only</li>
	      <li class="fragment">uses <a href="https://github.com/fengyuanchen/cropper">Cropper - A simple jQuery image cropping plugin</a></li>
	      <li class="fragment"><a href="https://drupal.org/project/image_widget_crop">drupal.org/project/image_widget_crop</a></li>
	    </ul>
	  </section>

	  <section id="crop-ui-imgae-widget-crop-3">
      <h2>Demo</h2>
	  </section>
	</section>

  <section id="roadmap">
	  <h2>Roadmap</h2>
    <p>Crop API is pretty stable. We want to add support for rotation: <a href="https://www.drupal.org/node/2691045">#2691045</a></p>
    <p class="fragment">Our main objective at this point is supporting developers of UI modules.</p>
	</section>

  <section id="get-involved">
    <h2>Resources</h2>
    <ul>
      <li><a href="https://github.com/drupal-media">github.com/drupal-media</a></li>
      <li><a href="http://groups.drupal.org/media">groups.drupal.org/media</a></li>
      <li>Individual project pages and issue queues</li>
      <li>#drupal-media IRC</li>
      <li>@slashrsm - <a href="https://www.drupal.org/u/slashrsm">drupal.org/u/slashrsm</a></li>
      <li>@bleen - <a href="https://www.drupal.org/u/bleen">drupal.org/u/bleen</a></li>
    </ul>
  </section>

	<section id="last">
	  <h2>Thank you! Questions?</h2>
	  <p>
	    <a href="https://www.drupal.org/u/slashrsm">Janez Urevc</a> / <a href="http://twitter.com/slashrsm">@slashrsm</a> / <a href="http://janezurevc.name">http://janezurevc.name</a><br />
	    <a href="https://www.drupal.org/u/bleen">Alexander Ross</a> / <a href="http://twitter.com/bleen18">@bleen18</a> / <a href="http://bleen.net">http://bleen.net</a>
	  </p>
	  <p>
	    <a href="https://slashrsm.github.io/d8-cropping-session/">slashrsm.github.io/d8-cropping-session/</a>
	  </p>
	</section>

      </div>
    </div>
    <div class="footer" style="position:relative; bottom: 50px;">
      <a href="http://md-systems.ch"><div class="logo" style="width: 100px; float: left; margin-left: 20px;"><img src="img/md.png" style="width: 100%;" /></div></a>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>
  </body>
</html>
